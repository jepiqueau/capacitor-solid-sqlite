import{e as N,o as W,c as R,i as d,F as Z,f as U,a as M,b as y,S as Y,t as S,s as i,p as h}from"./index-3913827d.js";import{u as ee,o as A}from"./connection-utils-49cf70d0.js";import{d as O}from"./delay-utils-7dae93d5.js";const D=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAkCAYAAAD7PHgWAAAEcElEQVRYR8WYP2hTQRzHfx10aQchi0JcLGpBSBcrlTrpIjoFiy6FDipOHVz8Q0HrUGxdg1N1KBRBackiVoQ6FMVIuzQgpEpdjOiSLUXQIfK9976X37t3l6RNxVuS3Hvv7nPf3+/3vcvraTQaDdlFK4z3yMT8rh7d0Ww97QAzfX12wFq9br4buOk7UpicaQm5F4toCajh9LKnLm23Bex0Ee3k7ArwS/mVvH5elqEzzWmGr0dhDwGGFs3ouMAdA7491y+Dhw5KZuG9UEEA1r6XZfhUPOxgQ0pzPQJIDTi11NtOKOkKkHCcpfDrjQlxaXnGdFE1fAcg2to7sWmgAfVYWCzbPwO06imNHt0Tyd/IyfDlrYRy7kI3fvyUsyvRPbsCxIPIGQ6MAdFWD5RbKnjxZhTSWn0+AqyuS2agEPWNjZhPjrUngBgQkABDQ3hNOJdnmvkXa5UZ6W2CxXBaRoBiLLR2cLgnUSRIbOSLlptVx8LQk7k5iHutah44Pks12+VfApBVh04YsAbV1yR7sslYXU+oSPUK46NWZWPmseJdATLfTJ5UJsxYBNXqoc+EeX7RgpbmRmX1pcjsSq95VkP5AM1czMl63ViS27iNen2QYSUoH+bWVq1WpTh5OAFp1ekbtz7JRVJBPH/+Sk6O5i4YQCxc57Sbq0i1loA2R6hKfDho7rFLqZWzYvXiqCKgSi/6LSC+o7l2ZCIWz5UChHqfH2alvPVVRp/sT4Q7P/1NstmssZ6okNKAyD803+5BICjohjm90qgnAajhcNEHiP7BgQHZqFQkK49FF40uDtyHrZAKEQ6/NWDIoAkcBAQcmpuHoZWG+l1IwlHBjgGp3rP1zchi4kpG3vi+7wQUkMgz5p8tKIwdnzHbhtiatALTRcLvtBnmmc/ANQCuo3JxLGMF6+tmHFUULqgJsUl6Bwy/jXr1elQUWlGnj37JyfQksBhWL/tpM/itK9kHanOQ3rd47bcZxxSIkl97ow67u2Lfouh/+l6EnIvXuU5/TNkMAAjnA7RhUf9RQkWkTRhh9TUCuuO6kUooCMBc/xHzzLG71ZYJjAUhPD6TDUERxoXTC7CRiqOXAIRBZ/J5e3/oXxvhdE6FqpA2g+sslFaA3iLRMmvfYz6l8ixWD/3adF0bwXUNiN87gcP9qfOg72jkepVWkIC6ELQZu5BdAWIwbSl6F9AWQEAXRB8GtOpaxa4BCan3Tp3cemJ3G9R+R/g9DbGenDtLCJQVHIL0AeqKb7fFkaWjdzMIrz4+afdvpWKoslks+Lx9YltufQy/hPICUj1OQAOHR9KGeABwAfk6xOeFOmdrxaI5c6Ktffgjs5/4VzV6QRVUkKcafRMHQh8hQ9udPrm4ChJQw7n3EJYp4D0PPl3YlKtjx+0K3UEAiZ3G9T3fATWRd5UJ8cEBCm3o9D47Fc8CKUCEEw/om/kUD7H4zY2e+Vh8UJb8/fTrDt+BA8/rfZ/j63m9gLSYUHL7Ks99ndZpdYZew3Fub4hbVd3/uvYXfqiMwjPten8AAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAU1QTFRFNjtAQEVK////bG9zSk9T/v7+/f39/f3+9vf3O0BETlJWNzxB/Pz8d3t+TFFVzM3O1NXX7u/vUldbRElNs7W3v8HCmZyeRkpPW19j8vLy7u7vvsDC9PT1cHR3Oj9Eo6WnxsjJR0tQOD1Bj5KVgYSHTVFWtri50dLUtLa4YmZqOT5D8vPzRUpOkZOWc3Z64uPjr7Gzuru95+jpX2NnaGxwPkNHp6mrioyPlZeadXh8Q0hNPEBFyszNh4qNc3d6eHx/OD1Cw8XGXGBkfoGEra+xxcbIgoaJu72/m52ggoWIZ2tu8/P0wcLE+vr7kZSXgIOGP0NIvr/BvL6/QUZKP0RJkpWYpKaoqKqtVVldmJqdl5qcZWhstbe5bHB0bnJ1UVVZwsTF5ubnT1RYcHN3oaSm3N3e3NzdQkdLnJ+h9fX1TlNX+Pj47/DwwsPFVFhcEpC44wAAAShJREFUeNq8k0VvxDAQhZOXDS52mRnKzLRlZmZm+v/HxmnUOlFaSz3su4xm/BkGzLn4P+XimOJZyw0FKufelfbfAe89dMmBBdUZ8G1eCJMba69Al+AABOOm/7j0DDGXtQP9bXjYN2tWGQfyA1Yg1kSu95x9GKHiIOBXLcAwUD1JJSBVfUbwGGi2AIvoneK4bCblSS8b0RwwRAPbCHx52kH60K1b9zQUjQKiULbMDbulEjGha/RQQFDE0/ezW8kR3C3kOJXmFcSyrcQR7FDAi55nuGABZkT5hqpk3xughDN7FOHHHd0LLU9qtV7r7uhsuRwt6pEJJFVLN4V5CT+SErpXt81DbHautkpBeHeaqNDRqUA0Uo5GkgXGyI3xDZ/q/wJMsb7/pwADAGqZHDyWkHd1AAAAAElFTkSuQmCC"],F={database:"db-from-json",version:1,encrypted:!1,mode:"full",tables:[{name:"users",schema:[{column:"id",value:"INTEGER PRIMARY KEY NOT NULL"},{column:"email",value:"TEXT UNIQUE NOT NULL"},{column:"name",value:"TEXT"},{column:"age",value:"INTEGER"},{column:"sql_deleted",value:"BOOLEAN DEFAULT 0 CHECK (sql_deleted IN (0, 1))"},{column:"last_modified",value:"INTEGER DEFAULT (strftime('%s', 'now'))"}],indexes:[{name:"index_user_on_name",value:"name"},{name:"index_user_on_last_modified",value:"last_modified DESC"},{name:"index_user_on_email_name",value:"email ASC, name",mode:"UNIQUE"}],values:[[1,"Whiteley.com","Whiteley",30,0,1582536810],[2,"Jones.com","Jones",44,0,1582812800],[3,"Simpson@example.com","Simpson",69,0,1583570630],[4,"Brown@example.com","Brown",15,0,1590383895]]},{name:"messages",schema:[{column:"id",value:"INTEGER PRIMARY KEY NOT NULL"},{column:"userid",value:"INTEGER"},{column:"title",value:"TEXT NOT NULL"},{column:"body",value:"TEXT NOT NULL"},{column:"sql_deleted",value:"BOOLEAN DEFAULT 0 CHECK (sql_deleted IN (0, 1))"},{column:"last_modified",value:"INTEGER DEFAULT (strftime('%s', 'now'))"},{foreignkey:"userid",value:"REFERENCES users(id) ON DELETE CASCADE"}],values:[[1,3,"test post 1","content test post 1",0,1587310030],[2,1,"test post 2","content test post 2",0,1590388125]]},{name:"images",schema:[{column:"id",value:"INTEGER PRIMARY KEY NOT NULL"},{column:"name",value:"TEXT UNIQUE NOT NULL"},{column:"type",value:"TEXT NOT NULL"},{column:"size",value:"INTEGER"},{column:"img",value:"BLOB"},{column:"sql_deleted",value:"BOOLEAN DEFAULT 0 CHECK (sql_deleted IN (0, 1))"},{column:"last_modified",value:"INTEGER DEFAULT (strftime('%s', 'now'))"}],values:[[1,"feather","png",null,D[1],0,1582536810],[2,"meowth","png",null,D[0],0,1590151132]]}]},te={database:"db-from-json",version:1,encrypted:!1,mode:"partial",tables:[{name:"messages",indexes:[{name:"index_messages_on_title",value:"title"},{name:"index_messages_on_last_modified",value:"last_modified DESC"}],values:[[2,1,"test post 2","content test post 2",1,1590388125],[3,3,"test post 3","content test post 3",0,1590396146],[4,2,"test post 4","content test post 4",0,1590396288]]},{name:"users",values:[[5,"Addington.com","Addington",22,0,1590388335],[1,"Whiteley.com","Whiteley",30,1,1590388335],[6,"Bannister.com","Bannister",59,0,1590393015],[2,"Jones@example.com","Jones",45,0,1590393325],[3,"Simpson@example.com","Simpson",69,0,1583570630]]}]},se={database:"db-from-json",version:1,encrypted:!1,mode:"partial",tables:[{name:"users",values:[[3,"Simpson@example.com","Simpson",69,1,1583570630]]},{name:"messages",values:[[1,3,"test post 1","content test post 1",1,1587310030],[3,3,"test post 3","content test post 3",1,1590396146]]}]},_={database:"db-issue265",version:1,encrypted:!1,mode:"full",tables:[{name:"sites",schema:[{column:"id",value:"INTEGER PRIMARY KEY NOT NULL"},{column:"siteId",value:"TEXT UNIQUE NOT NULL"},{column:"code",value:"TEXT NOT NULL"},{column:"officeCode",value:"TEXT NOT NULL"},{column:"name",value:"TEXT NOT NULL"},{column:"address",value:"TEXT"},{column:"city",value:"TEXT"},{column:"province",value:"TEXT"},{column:"country",value:"TEXT"},{column:"zip",value:"TEXT"},{column:"email",value:"TEXT"},{column:"telephone",value:"TEXT"},{column:"lat",value:"TEXT"},{column:"lng",value:"TEXT"},{column:"sql_deleted",value:"BOOLEAN DEFAULT 0 CHECK (sql_deleted IN (0, 1))"},{column:"last_modified",value:"INTEGER DEFAULT (strftime('%s', 'now'))"}]}]},oe="_ImportExportJson_167st_1",ae="_header_167st_7",ne="_content_167st_15",C={ImportExportJson:oe,header:ae,content:ne},re=[{siteId:"01FA1B4AB79B6D43C1257FD90056219C",code:"ANT012",officeCode:"ANT012",name:"PORTA DI ROMA",address:"Via Alberto Lionello, 201, Località Bufalotta",city:"ROMA",province:"RM",country:"",zip:"",email:"prolocofossaltina@gmail.com",telephone:"0690233474",lat:"41,9716623",lng:"12,5401904",sql_deleted:0,last_modified:1651201887},{siteId:"01FA1B4AB79B6D43C1257FD90056220C",code:"ANT013",officeCode:"ANT013",name:"TEST1",address:"Via Test1 , 180",city:"Test1City1",province:"BK",country:"",zip:"",email:"protest1@gmail.com",telephone:"0690233475",lat:"40,9716623",lng:"11,5401904",sql_deleted:0,last_modified:1651201888},{siteId:"01FA1B4AB79B6D43C1257FD90056221C",code:"ANT014",officeCode:"ANT014",name:"TEST2",address:"Via Test2, 200",city:"Test1City2",province:"CD",country:"",zip:"",email:"protest2@gmail.com",telephone:"0690233476",lat:"39,9716623",lng:"13,5401904",sql_deleted:0,last_modified:1651201889},{siteId:"02FA1B4AB79B6D43C1257FD90056220C",code:"ANT015",officeCode:"ANT015",name:"TEST3",address:"Via Test3 , 120",city:"Test1City3",province:"TORINO",country:"",zip:"",email:"protest3@gmail.com",telephone:"0790233475",lat:"42,9716623",lng:"14,5401904",sql_deleted:0,last_modified:1651202e3},{siteId:"02FA1B4AB79B6D43C1257FD90056221C",code:"ANT016",officeCode:"ANT016",name:"TEST4",address:"Via Test4, 210",city:"Test1City4",province:"AV",country:"",zip:"",email:"protest4@gmail.com",telephone:"0790233476",lat:"38,9716623",lng:"20,5401904",sql_deleted:0,last_modified:1651202002},{siteId:"03FA1B4AB79B6D43C1257FD90056220C",code:"ANT017",officeCode:"ANT017",name:"TEST5",address:"Via Test5 , 140",city:"Test1City5",province:"BW",country:"",zip:"",email:"protest5@gmail.com",telephone:"0690233585",lat:"37,9716623",lng:"19,5401904",sql_deleted:0,last_modified:1651202004},{siteId:"03FA1B4AB79B6D43C1257FD90056221C",code:"ANT018",officeCode:"ANT018",name:"TEST6",address:"Via Test6, 250",city:"Test1City6",province:"CT",country:"",zip:"",email:"protest6@gmail.com",telephone:"0690233586",lat:"36,9716623",lng:"18,5401904",sql_deleted:0,last_modified:1651202006}],le=S("<div><header><h2>Test Import/Export Json</h2></header><div><pre><p></p></pre><ul>"),ce=S("<div><p>Name: <!> uDeleted: <!> "),ie=S("<p>- mTitle: <!> mDeleted: "),me=S("<p>"),Te=()=>{const[J,m]=N([]),[f,n]=N(""),[v,j]=N([]);let r;const B=async()=>{m(e=>e.concat(`* Starting testImportExportJson *

`))},I=async e=>{e.length===0?m(t=>t.concat(`
* The set of tests was successful *
`)):(m(t=>t.concat(`${e}`)),m(t=>t.concat(`
* The set of tests failed *
`)))},P=async()=>{try{let e=await i.echo("Hello from echo");if(e.value!=="Hello from echo"){const t=`Error: Echo not returning "Hello from echo"
`;return n(s=>s.concat(t)),Promise.reject()}if(m(t=>t.concat(`> Echo successful
`)),e=(await i.isDatabase("db-from-json")).result,e&&(r=await A("db-from-json",!1,"no-encryption",1,!0),await i.closeConnection("db-from-json",!1)),e=await i.isJsonValid(JSON.stringify(F)),!e.result){const t=`Error: Json Object dataToImport not valid"
`;return n(s=>s.concat(t)),Promise.reject()}if(m(t=>t.concat(`> isJsonValid dataToImport successful
`)),e=await i.importFromJson(JSON.stringify(F)),e.changes.changes===-1){const t=`Error: ImportFromJson dataToImport changes < 0"
`;return n(s=>s.concat(t)),Promise.reject()}m(t=>t.concat(`> importFromJson Full successful
`)),r=await A("db-from-json",!1,"no-encryption",1,!1),m(t=>t.concat(`> Open connection 'db-from-json' successful
`)),h==="web"&&await i.saveToStore("db-from-json");return}catch(e){let t=e.message?e.message:e;return n(s=>s.concat(`Error: ${t}`)),Promise.reject()}},$=async()=>{try{let e=await r.exportToJson("full");if(!(await i.isJsonValid(JSON.stringify(e.export))).result){let s="Error: isJsonValid Full returns false";return n(a=>a.concat(`Error: ${s}`)),Promise.reject()}if(console.log(`>>> Full export ${JSON.stringify(e.export)}`),e.export.tables.length!=3||e.export.tables[0].values.length!=4||e.export.tables[1].values.length!=2||e.export.tables[2].values.length!=2){let s="Error: Export Full Json not correct";return n(a=>a.concat(`Error: ${s}`)),Promise.reject()}m(s=>s.concat(`> Export Full 'db-from-json' successful
`));return}catch(e){let t=e.message?e.message:e;return n(s=>s.concat(`Error: ${t}`)),Promise.reject()}},g=async e=>{try{const t=`
            SELECT users.id AS uid, users.name AS uname, messages.title AS mtitle, 
            users.sql_deleted AS udeleted, users.last_modified AS ulast,
            messages.sql_deleted AS mdeleted , messages.last_modified AS mlast
            FROM users
            LEFT OUTER JOIN messages ON messages.userid = users.id 
            `;let s=await r.query(t);j([...s.values]),console.log(`&&&&&& users ${e} &&&&&&`);for(const a of v())console.log(`uid: ${a.uid} uname: ${a.uname} udeleted: ${a.udeleted} ulast: ${a.ulast}`),a.mtitle!=null&&console.log(`       mtitle: ${a.mtitle} mdeleted: ${a.mdeleted} mlast: ${a.mlast}`);return}catch(t){let s=t.message?t.message:t;return n(a=>a.concat(`Error: ${s}`)),Promise.reject()}},V=async()=>{try{let e=await r.createSyncTable();if(e.changes.changes<0){const s='createSyncTable "db-from-json" changes < 0 ';return n(a=>a.concat(`Error: ${s}`)),Promise.reject()}if(m(s=>s.concat(`> createSyncTable  successful
`)),e=await r.getSyncDate(),e.syncDate<=0){const s="getSyncDate return 0 ";n(a=>a.concat(`Error: ${s}`));return}const t=`> getSyncDate "db-from-json" successful
`;m(s=>s.concat(t)),h==="web"&&await i.saveToStore("db-from-json");return}catch(e){let t=e.message?e.message:e;return n(s=>s.concat(`Error: ${t}`)),Promise.reject()}},x=async(e,t)=>{try{await i.closeConnection("db-from-json",!1);let s=await i.isJsonValid(JSON.stringify(e));if(!s.result){const l=`Error: Json Object ${t} not valid"
`;return n(u=>u.concat(l)),Promise.reject()}if(m(l=>l.concat(`> isJsonValid ${t} successful
`)),s=await i.importFromJson(JSON.stringify(e)),s.changes.changes===-1){const l=`Error: ImportFromJson ${t} changes < 0"
`;return n(u=>u.concat(l)),Promise.reject()}m(l=>l.concat(`> importFromJson ${t} successful
`)),r=await A("db-from-json",!1,"no-encryption",1,!1),m(l=>l.concat(`> Open connection 'db-from-json' successful
`));const a=new Date;await r.setSyncDate(a.toISOString()),h==="web"&&await i.saveToStore("db-from-json");return}catch(s){let a=s.message?s.message:s;return n(l=>l.concat(`Error: ${a}`)),Promise.reject()}},Q=async()=>{try{const e=[{statement:"INSERT INTO users (name,email,age) VALUES (?,?,?);",values:[["Jackson","Jackson@example.com",18],["Bush","Bush@example.com",25]]},{statement:"INSERT INTO users (name,email,age) VALUES (?,?,?);",values:["Kennedy","Kennedy@example.com",45]},{statement:"INSERT INTO users (name,email,age) VALUES (?,?,?);",values:["Jeep","Jeep@example.com",65]},{statement:"UPDATE users SET email = ? WHERE id = ?",values:[["Addington@example.com",5],["Bannister@example.com",6]]},{statement:"INSERT INTO messages (userid, title, body) VALUES (?,?,?);",values:[[2,"test post 5","content test post 5"],[4,"test post 6","content test post 6"]]},{statement:"DELETE FROM users WHERE id = ?;",values:[4]}];let t=await r.executeSet(e);if(console.log(`>>> executeSet res: ${JSON.stringify(t)}`),t.changes.changes!=10){const a='executeSet delete "db-from-json" changes != 10 ';return n(l=>l.concat(`Error: ${a}`)),Promise.reject()}const s=`
            DELETE FROM users WHERE id = 2;
            `;if(t=await r.execute(s),console.log(`>>> execute res: ${JSON.stringify(t)}`),t.changes.changes!=3){const a='execute delete "db-from-json" changes != 3 ';return n(l=>l.concat(`Error: ${a}`)),Promise.reject()}}catch(e){let t=e.message?e.message:e;return n(s=>s.concat(`Error: ${t}`)),Promise.reject()}},k=async()=>{try{let e=await r.exportToJson("partial");if(console.log(`>>> export partial ${JSON.stringify(e.export)}`),Object.keys(e.export).length<=0){let s="Returned Json Object is empty, nothing to synchronize";return n(a=>a.concat(`Error: ${s}`)),Promise.reject()}if(!(await i.isJsonValid(JSON.stringify(e.export))).result){let s="Error: isJsonValid Full returns false";return n(a=>a.concat(`Error: ${s}`)),Promise.reject()}m(s=>s.concat(`> Export Partial 'db-from-json' successful
`));return}catch(e){let t=e.message?e.message:e;return n(s=>s.concat(`Error: ${t}`)),Promise.reject()}},q=async()=>{try{await r.setSyncDate(new Date().toISOString()),await r.deleteExportedRows();return}catch(e){let t=e.message?e.message:e;return n(s=>s.concat(`Error: ${t}`)),console.log(`${f()}`),Promise.reject()}},X=async()=>{try{const e=[{statement:`INSERT INTO users (name,email,age) VALUES (?,?,?)
                 ON CONFLICT (email) 
                 DO UPDATE SET email = "testconflict@example.com", name="TestConflict", last_modified=(strftime('%s', 'now'));`,values:["Addington","Addington@example.com",22]},{statement:`INSERT INTO users (name,email,age) VALUES (?,?,?)
                 ON CONFLICT (email) 
                 DO UPDATE SET email = "testconflict1@example.com", name="TestConflict1", last_modified=(strftime('%s', 'now'));`,values:["Jeep","Jeep@example.com",65]},{statement:`INSERT INTO users (name,email,age) VALUES (?,?,?)
                 ON CONFLICT (email) 
                 DO UPDATE SET email = "testconflict2@example.com", name="TestConflict2", last_modified=(strftime('%s', 'now'));`,values:["Test1","Test1@example.com",45]},{statement:`INSERT INTO users (name,email,age) VALUES (?,?,?)
                 ON CONFLICT (email) 
                 DO UPDATE SET email = "testconflict3@example.com", name="TestConflict3", last_modified=(strftime('%s', 'now'));`,values:["Test2","Test2@example.com",60]},{statement:`INSERT INTO users (name,email,age) VALUES (?,?,?)
                 ON CONFLICT (email) 
                 DO UPDATE SET email = "testconflict4@example.com", name="TestConflict4", last_modified=(strftime('%s', 'now'));`,values:["Test3","Test3@example.com",15]}];let t=await r.executeSet(e);if(t.changes.changes!=5||t.changes.lastId!=13){const s="changes !=5 or lastId != 13";return console.log(`${s}`),n(a=>a.concat(`Error: ${s}`)),Promise.reject()}console.log(`>>> insertOnConflict executeSet res: ${JSON.stringify(t)}`)}catch(e){let t=e.message?e.message:e;return n(s=>s.concat(`Error: ${t}`)),console.log(`${f()}`),Promise.reject()}},H=async()=>{try{let e=await i.isJsonValid(JSON.stringify(_));if(!e.result){const o=`Error: Json Object dataToImport265 not valid"
`;return n(c=>c.concat(o)),Promise.reject()}if(m(o=>o.concat(`> isJsonValid dataToImport265 successful
`)),e=await i.importFromJson(JSON.stringify(_)),e.changes.changes===-1){const o=`Error: ImportFromJson dataToImport265 changes < 0"
`;return n(c=>c.concat(o)),Promise.reject()}m(o=>o.concat(`> importFromJson dataToImport265 successful
`)),r=await A("db-issue265",!1,"no-encryption",1,!1),m(o=>o.concat(`> Open connection 'db-issue265' successful
`));const t=[{statement:"INSERT INTO sites (siteId,code,officeCode,name,address,city,province,country,zip,email,telephone,lat,lng) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?)",values:[["01FA1B4AB79B6D43C1257FD90056219C","ANT012","ANT012","PORTA DI ROMA","Via Alberto Lionello, 201, Località Bufalotta","ROMA","RM","","","prolocofossaltina@gmail.com","0690233474","41,9716623","12,5401904"],["01FA1B4AB79B6D43C1257FD90056220C","ANT013","ANT013","TEST1","Via Test1 , 180","Test1City1","BK","","","protest1@gmail.com","0690233475","40,9716623","11,5401904"]]}],s="DELETE FROM sites;";if(e=await r.execute(s),e=await r.executeSet(t),e.changes.changes!=2||e.changes.lastId!=2){const o=`Error: twoSitesSet changes != 2 || lastId != 2"
`;return n(c=>c.concat(o)),Promise.reject()}const a=`
            INSERT INTO sites (siteId,code,officeCode,name,address,city,province,country,zip,email,telephone,lat,lng) 
            VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?)
            ON CONFLICT(siteId) DO UPDATE 
            SET code=excluded.code,officeCode=excluded.officeCode,name=excluded.name,address=excluded.address,city=excluded.city,province=excluded.province,country=excluded.country,zip=excluded.zip,email=excluded.email,telephone=excluded.telephone,lat=excluded.lat,lng=excluded.lng;
            `,l=[];if(re.forEach(o=>{const c=[o.siteId,o.code,o.officeCode,o.name,o.address,o.city,o.province,o.country,o.zip,o.email,o.telephone,o.lat,o.lng];l.push({statement:a,values:c})}),e=await r.executeSet(l),e.changes.changes!=7||e.changes.lastId!=7){const o=`Error: fullSitesSet changes != 7 || lastId != 7"
`;return n(c=>c.concat(o)),Promise.reject()}let u=await r.query("SELECT total_changes();",[]);console.log(`>>> retQuery total_changes: ${JSON.stringify(u)}`),u=await r.query("SELECT last_insert_rowid();",[]),console.log(`>>> retQuery last_insert_rowid(): ${JSON.stringify(u)}`),e=(await i.isConnection("db-issue265",!1)).result,e&&await i.closeConnection("db-issue265",!1)}catch(e){let t=e.message?e.message:e;return n(s=>s.concat(`Error: ${t}`)),console.log(`${f()}`),Promise.reject()}};return W(async()=>{try{await B(),await P(),await V(),await O(2,"before a full export");let e=await r.query("SELECT * from sync_table;",[]);console.log(`>>> retQuery before export full: ${JSON.stringify(e)}`),await g("before export full"),await $(),e=await r.query("SELECT * from sync_table;",[]),console.log(`>>> retQuery after export full: ${JSON.stringify(e)}`),await x(te,"partialImport1"),await O(2,"before capturing new data"),await Q(),await g("after capturing some stuff"),e=await r.query("SELECT * from sync_table;",[]),console.log(`>>> retQuery before export partial: ${JSON.stringify(e)}`),await k(),e=await r.query("SELECT * from sync_table;",[]),console.log(`>>> retQuery after export partial: ${JSON.stringify(e)}`),await q(),await x(se,"partialImport2"),await g("after partialImport2 "),await O(2,"before INSERT ON CONFLICT UPDATE"),await X(),f().length===0&&await g("after final"),(await i.isConnection("db-from-json",!1)).result&&await i.closeConnection("db-from-json",!1),await H(),await I(f())}catch{await I(f())}}),R(Y,{get children(){const e=le(),t=e.firstChild,s=t.nextSibling,a=s.firstChild,l=a.firstChild,u=a.nextSibling;return d(l,ee(J)),d(u,R(Z,{get each(){return v()},children:o=>(()=>{const c=ce(),T=c.firstChild,p=T.firstChild,w=p.nextSibling,G=w.nextSibling,b=G.nextSibling;return b.nextSibling,d(T,()=>o.uname,w),d(T,()=>o.udeleted,b),d(c,(()=>{const z=U(()=>o.mtitle!=null);return()=>z()&&(()=>{const E=ie(),K=E.firstChild,L=K.nextSibling;return L.nextSibling,d(E,()=>o.mtitle,L),d(E,()=>o.mdeleted,null),E})()})(),null),c})()})),d(s,(()=>{const o=U(()=>f().length>0);return()=>o()&&(()=>{const c=me();return d(c,f),c})()})(),null),M(o=>{const c=C.ImportExportJson,T=C.header,p=C.content;return c!==o._v$&&y(e,o._v$=c),T!==o._v$2&&y(t,o._v$2=T),p!==o._v$3&&y(s,o._v$3=p),o},{_v$:void 0,_v$2:void 0,_v$3:void 0}),e}})};export{Te as default};
